if(!window.WIDGETBOX){(function(){var D=false;var C=function(){WIDGETBOX.setPageLoaded();};var B=function(){WIDGETBOX.setPageUnloaded();};WIDGETBOX={libs:{},version:"69750",urls:{runtimeBaseUrl:"http://www.widgetserver.com/syndication",galleryBaseUrl:"http://www.widgetbox.com",cdnRuntimeBaseUrl:"http://cdn.widgetserver.com/syndication",cdnRuntimeFliteBaseUrl:"http://s.flite.com/syndication",cdnGalleryBaseUrl:"http://pub.widgetbox.com",metricsBaseUrl:"http://t.widgetserver.com/t",proxyBaseUrl:"http://p.widgetserver.com/p",linkbarBaseUrl:"http://www.widgetserver.com/syndication/l",shareBaseUrl:"http://data.widgetserver.com/data-api",imageProxyBaseUrl:"http://p.widgetserver.com/p",dataApiBaseUrl:"http://data.widgetserver.com"},globals:{token:"",tokenTime:0,widgets:[],widgetCount:0,pageLoaded:false,pageUnloaded:false,eventListeners:[],pageLoadListeners:[],pageUnloadListeners:[],panels:[],panelCount:0,showPanelMarks:true,suppressGetWidget:false,disableGetWidget:false,enableLogging:false,disableHitTracking:false,log:"",trustedPage:false,disableInstallerMenu:false,renderInstallerMenuInline:false,anchorEl:null,vid:null,startTime:0,flashBlacklist:[],nextZIndex:5001,isTopAccessible:true,trackingKeys:{i:"appId",aik:"appPK",ri:"regId",ark:"regPK",uid:"userPK",apk:"providerPK",pnk:"installPartnerNetworkPK",gk:"fromGalleryPK",pt:"widgetPrototypeOrdinal",rv:"regVersion",rpv:"regPubVersion",iv:"appVersion",udd:"isUseDefaultDomain",dd:"defaultDomain"},shareTrackingKeyRegex:"sik|sid|iv|rv|rpv|v.S+|sd.S+|ud.S+"},init:function(){if(!D){D=true;WIDGETBOX.globals.startTime=(new Date()).getTime();if(window&&window.location&&window.location.protocol==="https:"){for(var H in WIDGETBOX.urls){if(WIDGETBOX.urls.hasOwnProperty(H)){WIDGETBOX.urls[H]=WIDGETBOX.urls[H].replace("http://","https://");}}}if(window.WIDGETBOXLOADLISTENERS){for(H=0;H<WIDGETBOXLOADLISTENERS.length;H++){A.addPageLoadListener(WIDGETBOXLOADLISTENERS[H]);}}A.addEvent(window,"load",C);A.addEvent(window,"unload",B);if(window.WIDGETBOXINITLISTENERS){for(H=0;H<WIDGETBOXINITLISTENERS.length;H++){try{WIDGETBOXINITLISTENERS[H]();}catch(J){WIDGETBOX.logMessage(J);}}}try{var K=new RegExp("[A-Za-z]+:[/][/][A-Za-z0-9.-]+");var G=window.document.referrer;if(G){G=G.toLowerCase();}var I=window.location.href;if(I){I=I.toLowerCase();}var M=G.match(K);var F=(M&&M[0])||G;var L=I.match(K);var E=(L&&L[0])||I;WIDGETBOX.globals.isTopAccessible=A==top||!E||E=="about:blank"||F==E;}catch(J){WIDGETBOX.logMessage(J);}}},namespace:function(G){G=G.replace(".","/");if(G.indexOf("WIDGETBOX/")===0){G=G.substr(10);}if(G.indexOf("POSTAPP/")===0){G=G.substr(8);}var E=G.split("/");var I=WIDGETBOX;if(E){var H;for(var F=0;F<E.length;F++){H=E[F];if(!I[H]){I[H]={};}I=I[H];}}return G;},logMessage:function(E){if(A.globals.enableLogging){A.globals.log+=E+"\n";}},newLibInfo:function(G){G=G.replace(".","/");var J=G;var H="";var F=G.lastIndexOf("/");if(F>=0){H=G.substr(0,F);J=G.substr(F+1);}H=A.namespace(H);G=H+"/"+J;var I=G.replace("/","_").toLowerCase();var E={ns:H,name:J,path:G,id:I,status:null,callback:null};return E;},load:function(G,F,H){var E=A.newLibInfo(G);if(!WIDGETBOX.libs[E.id]){WIDGETBOX.libs[E.id]=E;E.status="loading";if(F){if(!E.listeners){E.listeners=[];}E.listeners.push(F);}A.appendScript(((!H)?WIDGETBOX.urls.runtimeBaseUrl:WIDGETBOX.urls.cdnRuntimeBaseUrl)+"/"+E.path+".js?"+encodeURIComponent(WIDGETBOX.version),"widgetbox_lib_"+E.id,"true");}else{E=WIDGETBOX.libs[E.id];if(F){if(E.status=="ready"){try{F(E);}catch(I){WIDGETBOX.logMessage(I);}}else{if(!E.listeners){E.listeners=[];}E.listeners.push(F);}}}},ready:function(F){var E=A.newLibInfo(F);if(!WIDGETBOX.libs[E.id]){WIDGETBOX.libs[E.id]=E;}E=WIDGETBOX.libs[E.id];return E.status=="ready";},setReady:function(G){var F=A.newLibInfo(G);if(!WIDGETBOX.libs[F.id]){WIDGETBOX.libs[F.id]=F;}F=WIDGETBOX.libs[F.id];F.status="ready";if(F.listeners){var E=0;for(E=0;E<F.listeners.length;E++){var H=F.listeners[E];try{H(F);}catch(I){WIDGETBOX.logMessage(I);}}}},appendScript:function(G,J,I,E){var F=document.createElement("script");F.id=J;F.type="text/javascript";if(I&&I!="false"){F.setAttribute("async",I);}if(E){F.onreadystatechange=function(){if(this.readyState=="complete"){E();}};F.onload=E;}F.src=G;var H=document.documentElement.firstChild;if(!H||(H.nodeName&&(H.nodeName.toLowerCase().indexOf("comment")>-1||H.nodeName.toLowerCase().indexOf("script")>-1))){H=document.getElementsByTagName("head")[0];}H.appendChild(F);},addEvent:function(I,H,F,E){if(!I){return ;}if(I.addEventListener){I.addEventListener(H,F,E);return true;}else{if(I.attachEvent){var G=I.attachEvent("on"+H,F);return G;}}},removeEvent:function(H,G,F,E){if(!H){return ;}if(H.removeEventListener){H.removeEventListener(G,F,E);return true;}else{if(H.detachEvent){return H.detachEvent("on"+G,F);}}},addEventListener:function(E,G){if(G){if(!A.globals.eventListeners){A.globals.eventListeners={};}if(!A.globals.eventListeners[E]){A.globals.eventListeners[E]=[];}var F=A.globals.eventListeners[E];F[F.length]=G;}},notifyEventListeners:function(F){if(!A.globals.eventListeners){return ;}var G=A.globals.eventListeners[F];if(!G){return ;}for(var E=0;E<G.length;E++){var H=G[E];try{H(this);}catch(I){WIDGETBOX.logMessage(I);}}},addPageLoadListener:function(E){if(E){if(!A.globals.pageLoaded){A.globals.pageLoadListeners.push(E);}else{try{E();}catch(F){WIDGETBOX.logMessage(F);}}}},addPageUnloadListener:function(E){if(E){if(!A.globals.pageUnloaded){A.globals.pageUnloadListeners.push(E);}else{try{E();}catch(F){WIDGETBOX.logMessage(F);}}}},setPageLoaded:function(){if(A.globals.pageLoaded){return ;}A.globals.pageLoaded=true;A.removeEvent(window,"load",C);var F=A.globals.pageLoadListeners;var E;for(E=0;E<F.length;E++){try{F[E]();}catch(G){WIDGETBOX.logMessage(G);}}},setPageUnloaded:function(){if(A.globals.pageUnloaded){return ;}A.globals.pageUnloaded=true;A.removeEvent(window,"unload",B);var E=A.globals.pageUnloadListeners;for(i=0;i<E.length;i++){try{E[i]();}catch(F){WIDGETBOX.logMessage(F);}}},generateGUID:function(H,E){var I=(H)?H:Math.random;var K=(E)?36:32,M="0123456789abcdef".split(""),F,G=[];if(E){G[8]=G[13]=G[18]=G[23]="-";G[14]="4";}for(var J=0;J<K;J++){if(!G[J]){F=0|I()*16;G[J]=M[(J==19)?(F&3)|8:F];}}var L=G.join("");if(!WIDGETBOX.globals.vid){WIDGETBOX.globals.vid=L;}return L;},generateProxiedImageUrl:function(E,H,G,F){var I=E;I=this.urls.imageProxyBaseUrl+"/ip/origin=="+encodeURIComponent(I);if(H){I+="&&w=="+Math.round(H);}if(G){I+="&&h=="+Math.round(G);}if(F){I+="&&type=="+F;}I+="?token="+WIDGETBOX.globals.token;return I;},createElement:function(F,E){if(E){return E.ownerDocument.createElement(F);}else{return document.createElement(F);}},isType:function(E,F){var G=Object.prototype.toString.call(F).slice(8,-1);return F!==undefined&&F!==null&&G===E;},extend:function(F,E){for(var G in E){F[G]=E[G];}return F;}};POSTAPP=WIDGETBOX;var A=WIDGETBOX;A.init();})();}WIDGETBOX.namespace("random");if(!WIDGETBOX.random.Utils){(function(){WIDGETBOX.random.Utils={seedData:null,seeded:false,random:function(){if(!WIDGETBOX.random.Utils.seeded){(function(J,K,D,I,M,G,C){K.seedrandom=function H(N,R){var Q=[];var O;if(WIDGETBOX.flattenOverride){B=WIDGETBOX.flattenOverride;}var T=new Date();var P=T.getTime();var S=B(R?[N,J]:(arguments.length?N:[P,J,window]),3);N=L(S,Q);WIDGETBOX.random.Utils.seedData='{t:"'+P+'"}';O=new F(Q);L(O.S,J);K.betterRandom=function U(){var X=O.g(I);var W=C;var V=0;while(X<M){X=(X+V)*D;W*=D;V=O.g(1);}while(X>=G){X/=2;W/=2;V>>>=1;}return(X+V)/W;};return N;};function F(S){var R,P,U=this,T=S.length;var Q=0,O=U.i=U.j=U.m=0;U.S=[];U.c=[];if(!T){S=[T++];}while(Q<D){U.S[Q]=Q++;}for(Q=0;Q<D;Q++){R=U.S[Q];O=E(O+R+S[Q%T]);P=U.S[O];U.S[Q]=P;U.S[O]=R;}U.g=function N(b){var Z=U.S;var Y=E(U.i+1);var X=Z[Y];var W=E(U.j+X);var V=Z[W];Z[Y]=V;Z[W]=X;var a=Z[E(X+V)];while(--b){Y=E(Y+1);X=Z[Y];W=E(W+X);V=Z[W];Z[Y]=V;Z[W]=X;a=a*D+Z[E(X+V)];}U.i=Y;U.j=W;return a;};U.g(D);}function B(P,Q,N,R){N=[];if(Q&&typeof (P)=="object"){for(R in P){if(R.indexOf("S")<5){try{N.push(B(P[R],Q-1));}catch(O){}}}}return N.length?N:""+P;}function L(N,P,Q,O){N+="";Q=0;for(O=0;O<N.length;O++){P[E(O)]=E((Q^=P[E(O)]*19)+N.charCodeAt(O));}N="";for(O in P){N+=String.fromCharCode(P[O]);}return N;}function E(N){return N&(D-1);}C=K.pow(D,I);M=K.pow(2,M);G=M*2;L(K.random(),J);})([],Math,256,6,52);Math.seedrandom();WIDGETBOX.random.Utils.seeded=true;}var A=Math.betterRandom();return A;}};})();}WIDGETBOX.namespace("flash");if(!WIDGETBOX.flash.Utils){(function(){var isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;var isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;WIDGETBOX.flash.Utils={isIE:function(){return isIE;},isWin:function(){return isWin;},isOpera:function(){return isOpera;},getMovie:function(movieName){if(isIE){return window[movieName];}else{return document[movieName];}},destroyMovie:function(flashTag){if(flashTag){var doc=flashTag.ownerDocument;if(doc&&WIDGETBOX.flash.Utils.isIE){var proxyEl=doc.createElement("div");proxyEl.id=flashTag.id;proxyEl.style.position="absolute";proxyEl.style.display="none";proxyEl.style.bottom="0px";proxyEl.style.left="0px";proxyEl.SetReturnValue=function(v){};doc.body.appendChild(proxyEl);setTimeout(function(){doc.body.removeChild(proxyEl);},1000);}if(flashTag.parentNode){flashTag.parentNode.removeChild(flashTag);}}},getParamValue:function(flashTag,paramName){var pValue="";if(flashTag){if(flashTag.nodeName=="OBJECT"){for(var i=0;i<flashTag.childNodes.length;i++){var paramNode=flashTag.childNodes[i];if(paramNode&&paramNode.nodeName=="PARAM"){var pName=paramNode.getAttribute("name");if(pName&&pName.toLowerCase()==paramName){var paramValue=paramNode.getAttribute("value");if(paramValue){pValue=paramValue.toLowerCase();}}}}}else{var paramValue=flashTag.getAttribute(paramName);if(paramValue){pValue=paramValue.toLowerCase();}}}return pValue;}};function ControlVersion(){var version;var axo;var e;try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");version=axo.GetVariable("$version");}catch(e){}if(!version){try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");version="WIN 6,0,21,0";axo.AllowScriptAccess="always";version=axo.GetVariable("$version");}catch(e){}}if(!version){try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");version=axo.GetVariable("$version");}catch(e){}}if(!version){try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");version="WIN 3,0,18,0";}catch(e){}}if(!version){try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");version="WIN 2,0,0,11";}catch(e){version=-1;}}return version;}function GetSwfVer(){var flashVer=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var swVer2=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var flashDescription=navigator.plugins["Shockwave Flash"+swVer2].description;var descArray=flashDescription.split(" ");var tempArrayMajor=descArray[2].split(".");var versionMajor=tempArrayMajor[0];var versionMinor=tempArrayMajor[1];if(descArray[3]!=""){tempArrayMinor=descArray[3].split("r");}else{tempArrayMinor=descArray[4].split("r");}var versionRevision=tempArrayMinor[1]>0?tempArrayMinor[1]:0;var flashVer=versionMajor+"."+versionMinor+"."+versionRevision;}}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1){flashVer=4;}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1){flashVer=3;}else{if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1){flashVer=2;}else{if(isIE&&isWin&&!isOpera){flashVer=ControlVersion();}}}}}return flashVer;}function DetectFlashVer(reqMajorVer,reqMinorVer,reqRevision){versionStr=GetSwfVer();if(versionStr==-1){return false;}else{if(versionStr!=0){if(isIE&&isWin&&!isOpera){tempArray=versionStr.split(" ");tempString=tempArray[1];versionArray=tempString.split(",");}else{versionArray=versionStr.split(".");}var versionMajor=versionArray[0];var versionMinor=versionArray[1];var versionRevision=versionArray[2];var ua=navigator.userAgent.toLowerCase();if(isWin&&versionMajor==8){try{if(ua.indexOf("firefox/3.0")>=0||(!isIE&&window!=window.top)){return false;}}catch(e){return false;}}if(WIDGETBOX.globals&&WIDGETBOX.globals.flashBlacklist){for(var i=0;i<WIDGETBOX.globals.flashBlacklist.length;i++){var userAgent=WIDGETBOX.globals.flashBlacklist[i].userAgent;if(userAgent&&ua.match(userAgent)){var rule=WIDGETBOX.globals.flashBlacklist[i].rule;if(rule){if(rule.indexOf("*")==0){return false;}else{if(rule.indexOf("==")==0){if(versionMajor==parseFloat(rule.substr(2))){return false;}}else{if(rule.indexOf("!=")==0){if(versionMajor!=parseFloat(rule.substr(2))){return false;}}else{if(rule.indexOf("<=")==0){if(versionMajor<=parseFloat(rule.substr(2))){return false;}}else{if(rule.indexOf(">=")==0){if(versionMajor>=parseFloat(rule.substr(2))){return false;}}else{if(rule.indexOf("<")==0){if(versionMajor<parseFloat(rule.substr(1))){return false;}}else{if(rule.indexOf(">")==0){if(versionMajor>parseFloat(rule.substr(1))){return false;}}}}}}}}}}}}if(versionMajor>parseFloat(reqMajorVer)){return true;}else{if(versionMajor==parseFloat(reqMajorVer)){if(versionMinor>parseFloat(reqMinorVer)){return true;}else{if(versionMinor==parseFloat(reqMinorVer)){if(versionRevision>=parseFloat(reqRevision)){return true;}}}}}return false;}}}function GetFlashVersionArray(){var version=[];version[0]=-1;version[1]=-1;version[2]=-1;var versionStr=GetSwfVer();if(isNaN(versionStr)){if(isIE){var versionParts=versionStr.split(" ");if(versionParts.length==2){versionParts=versionParts[1].split(",");if(versionParts.length==4){version[0]=parseInt(versionParts[0]);version[1]=parseInt(versionParts[1]);version[2]=parseInt(versionParts[2]);}}}else{var versionParts=versionStr.split(".");if(versionParts.length==3){version[0]=parseInt(versionParts[0]);version[1]=parseInt(versionParts[1]);version[2]=parseInt(versionParts[2]);}}}return version;}function Exception(name,message){if(name){this.name=name;}if(message){this.message=message;}}Exception.prototype.setName=function(name){this.name=name;};Exception.prototype.getName=function(){return this.name;};Exception.prototype.setMessage=function(msg){this.message=msg;};Exception.prototype.getMessage=function(){return this.message;};function FlashTag(src,width,height,version){if(arguments.length<4){throw new Exception("RequiredParameterException","You must pass in a src, width, height, and version when creating a FlashTag.");}this.src=src;this.width=width;this.height=height;this.version=version;this.id=null;this.flashVars=null;this.flashVarsStr=null;this.genericParam={};this.ie=(navigator.appName.indexOf("Microsoft")!=-1)?1:0;this.enableFSCommand=false;}FlashTag.prototype.setSource=function(src){this.src=src;};FlashTag.prototype.setWidth=function(w){this.width=w;};FlashTag.prototype.setHeight=function(h){this.height=h;};FlashTag.prototype.setVersion=function(v){this.version=v;};FlashTag.prototype.setId=function(id){this.id=id;};FlashTag.prototype.setBgcolor=function(bgc){if(bgc.charAt(0)!="#"){bgc="#"+bgc;}this.genericParam.bgcolor=bgc;};FlashTag.prototype.addParams=function(params){for(var paramName in params){var paramValue=params[paramName];this.genericParam[paramName]=paramValue;}};FlashTag.prototype.addFlashVars=function(fvs){this.flashVarsStr=fvs;};FlashTag.prototype.addFlashVarsParams=function(params){if(!this.flashVars){this.flashVars={};}for(var paramName in params){var paramValue=params[paramName];this.flashVars[paramName]=paramValue;}};FlashTag.prototype.addFlashVar=function(n,v){if(!this.flashVars){this.flashVars={};}this.flashVars[n]=v;};FlashTag.prototype.removeFlashVar=function(n){if(this.flashVars){this.flashVars[n]=null;}};FlashTag.prototype.setSwliveconnect=function(swlc){this.genericParam.swliveconnect=swlc;};FlashTag.prototype.setPlay=function(p){this.genericParam.play=p;};FlashTag.prototype.setLoop=function(l){this.genericParam.loop=l;};FlashTag.prototype.setMenu=function(m){this.genericParam.menu=m;};FlashTag.prototype.setQuality=function(q){if(q!="low"&&q!="high"&&q!="autolow"&&q!="autohigh"&&q!="best"){throw new Exception("UnsupportedValueException","Unsupported value.");}this.genericParam.quality=q;};FlashTag.prototype.setScale=function(sc){if(sc!="showall"&&sc!="noborder"&&sc!="exactfit"&&sc!="noscale"){throw new Exception("UnsupportedValueException","Unsupported value.");}this.genericParam.scale=sc;};FlashTag.prototype.setAlign=function(a){if(a!="l"&&a!="t"&&a!="r"&&a!="b"){throw new Exception("UnsupportedValueException","Unsupported value.");}this.genericParam.align=a;};FlashTag.prototype.setSalign=function(sa){if(sa!="l"&&sa!="t"&&sa!="r"&&sa!="b"&&sa!="tl"&&sa!="tr"&&sa!="bl"&&sa!="br"){throw new Exception("UnsupportedValueException","Unsupported value.");}this.genericParam.salign=sa;};FlashTag.prototype.setWmode=function(wm){if(wm!="window"&&wm!="opaque"&&wm!="transparent"&&wm!="direct"&&wm!="gpu"){throw new Exception("UnsupportedValueException","Unsupported value.");}this.genericParam.wmode=wm;};FlashTag.prototype.setBase=function(base){this.genericParam.base=base;};FlashTag.prototype.setAllowScriptAccess=function(sa){if(sa!="never"&&sa!="always"&&sa!="sameDomain"){throw new Exception("UnsupportedValueException","Unsupported value.");}this.genericParam.allowScriptAccess=sa;};FlashTag.prototype.setAllowNetworking=function(na){if(na!="all"&&na!="internal"&&na!="none"){throw new Exception("UnsupportedValueException","Unsupported value.");}this.genericParam.allowNetworking=na;};FlashTag.prototype.setEnableFSCommand=function(enableFSCommand){this.enableFSCommand=enableFSCommand;};FlashTag.prototype.toString=function(){var flashTag=new String();if(this.ie){flashTag+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ';if(this.id){flashTag+='id="'+this.id+'" ';}var protocol=(window.location.protocol!="https:")?"http:":"https:";flashTag+='codebase="'+protocol+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+this.version+'" ';if(String(this.width).indexOf("%")>=0||this.width>=0){flashTag+='width="'+this.width+'" ';flashTag+='height="'+this.height+'"';}flashTag+=">";flashTag+='<param name="movie" value="'+this.src+'"/>';var wmodeExists=false;for(var n in this.genericParam){if(this.genericParam[n]){if(n.toLowerCase()=="wmode"&&WIDGETBOX.globals.wmodeOverride){if(WIDGETBOX.globals.wmodeOverride.toLowerCase()=="best"){if(this.genericParam[n].toLowerCase()=="opaque"||this.genericParam[n].toLowerCase()=="window"){flashTag+='<param name="wmode" value="opaque"/>';}else{flashTag+='<param name="wmode" value="transparent"/>';}}else{flashTag+='<param name="wmode" value="'+WIDGETBOX.globals.wmodeOverride.toLowerCase()+'"/>';}wmodeExists=true;}else{if(n.toLowerCase()=="wmode"){wmodeExists=true;}flashTag+='<param name="'+n+'" value="'+this.genericParam[n]+'"/>';}}}if(!wmodeExists&&WIDGETBOX.globals.wmodeOverride){if(WIDGETBOX.globals.wmodeOverride.toLowerCase()=="best"){flashTag+='<param name="wmode" value="opaque"/>';}else{flashTag+='<param name="wmode" value="'+WIDGETBOX.globals.wmodeOverride.toLowerCase()+'"/>';}wmodeExists=true;}if(this.flashVars||this.flashVarsStr){var fv=this.getFlashVarsAsString();if(fv.length>0){flashTag+='<param name="flashvars" value="'+fv+'"/>';}}flashTag+="</object>";if(this.enableFSCommand&&navigator.platform.indexOf("Win")!=-1&&navigator.userAgent.indexOf("Opera")==-1){flashTag+='<script event="FSCommand(command,args)" for="'+this.id+'">\nFlashProxy.callJS(command, args);\n<\/script>';}}else{flashTag+='<embed src="'+this.src+'"';if(String(this.width).indexOf("%")>=0||this.width>=0){flashTag+=' width="'+this.width+'"';flashTag+=' height="'+this.height+'"';}flashTag+=' type="application/x-shockwave-flash"';if(this.id){flashTag+=' id="'+this.id+'"';flashTag+=' name="'+this.id+'"';}var wmodeExists=false;for(var n in this.genericParam){if(this.genericParam[n]){if(n.toLowerCase()=="wmode"&&WIDGETBOX.globals.wmodeOverride){if(WIDGETBOX.globals.wmodeOverride.toLowerCase()=="best"){if(this.genericParam[n].toLowerCase()=="opaque"||this.genericParam[n].toLowerCase()=="window"){flashTag+=(' wmode="opaque"');}else{flashTag+=(' wmode="transparent"');}}else{flashTag+=(' wmode="'+WIDGETBOX.globals.wmodeOverride.toLowerCase()+'"');}wmodeExists=true;}else{if(n.toLowerCase()=="wmode"){wmodeExists=true;}flashTag+=(" "+n+'="'+this.genericParam[n]+'"');}}}if(!wmodeExists&&WIDGETBOX.globals.wmodeOverride){if(WIDGETBOX.globals.wmodeOverride.toLowerCase()=="best"){flashTag+=(' wmode="opaque"');}else{flashTag+=(' wmode="'+WIDGETBOX.globals.wmodeOverride.toLowerCase()+'"');}wmodeExists=true;}if(this.flashVars||this.flashVarsStr){var fv=this.getFlashVarsAsString();if(fv.length>0){flashTag+=' flashvars="'+fv+'"';}}var protocol=(window.location.protocol!="https:")?"http:":"https:";flashTag+=' pluginspage="'+protocol+'//www.macromedia.com/go/getflashplayer">';flashTag+="</embed>";}return flashTag;};FlashTag.prototype.write=function(doc){if(!doc){doc=document;}doc.write(this.toString());};FlashTag.prototype.getElement=function(doc){if(!doc){doc=document;}var tempDiv=doc.createElement("div");tempDiv.innerHTML=this.toString();return(tempDiv.children&&tempDiv.children.length>0)?tempDiv.children[0]:null;};FlashTag.prototype.getFlashVarsAsString=function(){var qs=new String();for(var n in this.flashVars){if(this.flashVars[n]!==undefined&&this.flashVars[n]!==null){qs+=(encodeURIComponent(n)+"="+encodeURIComponent(this.flashVars[n])+"&");}}if(this.flashVarsStr){return qs+this.flashVarsStr;}return qs.substring(0,qs.length-1);};function FlashSerializer(useCdata){this.useCdata=useCdata;}FlashSerializer.prototype.serialize=function(args){var qs=new String();for(var i=0;i<args.length;++i){switch(typeof (args[i])){case"undefined":qs+="t"+(i)+"=undf";break;case"string":qs+="t"+(i)+"=str&d"+(i)+"="+escape(args[i]);break;case"number":qs+="t"+(i)+"=num&d"+(i)+"="+escape(args[i]);break;case"boolean":qs+="t"+(i)+"=bool&d"+(i)+"="+escape(args[i]);break;case"object":if(!args[i]){qs+="t"+(i)+"=null";}else{if(args[i] instanceof Date){qs+="t"+(i)+"=date&d"+(i)+"="+escape(args[i].getTime());}else{try{qs+="t"+(i)+"=xser&d"+(i)+"="+escape(this._serializeXML(args[i]));}catch(exception){throw new Exception("FlashSerializationException","The following error occurred during complex object serialization: "+exception.getMessage());}}}break;default:throw new Exception("FlashSerializationException","You can only serialize strings, numbers, booleans, dates, objects, arrays, nulls, and undefined.");}if(i!=(args.length-1)){qs+="&";}}return qs;};FlashSerializer.prototype._serializeXML=function(obj){var doc={};doc.xml="<fp>";try{this._serializeNode(obj,doc,null);}catch(exception){if(exception.message){throw new Exception("FlashSerializationException","Unable to serialize object because: "+exception.message);}throw exception;}doc.xml+="</fp>";return doc.xml;};FlashSerializer.prototype._serializeNode=function(obj,doc,name){switch(typeof (obj)){case"undefined":doc.xml+="<undf"+this._addName(name)+"/>";break;case"string":doc.xml+="<str"+this._addName(name)+">"+this._escapeXml(obj)+"</str>";break;case"number":doc.xml+="<num"+this._addName(name)+">"+obj+"</num>";break;case"boolean":doc.xml+="<bool"+this._addName(name)+' val="'+obj+'"/>';break;case"object":if(!obj){doc.xml+="<null"+this._addName(name)+"/>";}else{if(obj instanceof Date){doc.xml+="<date"+this._addName(name)+">"+obj.getTime()+"</date>";}else{if(obj instanceof Array){doc.xml+="<array"+this._addName(name)+">";for(var i=0;i<obj.length;++i){this._serializeNode(obj[i],doc,null);}doc.xml+="</array>";}else{doc.xml+="<obj"+this._addName(name)+">";for(var n in obj){if(typeof (obj[n])=="function"){continue;}this._serializeNode(obj[n],doc,n);}doc.xml+="</obj>";}}}break;default:throw new Exception("FlashSerializationException","You can only serialize strings, numbers, booleans, objects, dates, arrays, nulls and undefined");break;}};FlashSerializer.prototype._addName=function(name){if(name){return' name="'+name+'"';}return"";};FlashSerializer.prototype._escapeXml=function(str){if(this.useCdata){return"<![CDATA["+str+"]]>";}else{return str.replace(/&/g,"&amp;").replace(/</g,"&lt;");}};function FlashProxy(lcId,flashId,proxySwfName,callbackScope){FlashProxy.fpmap[lcId]=this;this.uid=lcId;this.proxySwfName=proxySwfName;this.callbackScope=callbackScope;this.flashSerializer=new FlashSerializer(false);this.q=[];}FlashProxy.prototype.call=function(){if(arguments.length==0){throw new Exception("Flash Proxy Exception","The first argument should be the function name followed by any number of additional arguments.");}this.q.push(arguments);if(this.q.length==1){this._execute(arguments);}};FlashProxy.prototype._execute=function(args){var ft=new FlashTag(this.proxySwfName,1,1,"6,0,65,0");ft.addFlashVar("lcId",this.uid);ft.addFlashVar("functionName",args[0]);if(args.length>1){var justArgs=[];for(var i=1;i<args.length;++i){justArgs.push(args[i]);}ft.addFlashVars(this.flashSerializer.serialize(justArgs));}var divName="_flash_proxy_"+this.uid;if(!document.getElementById(divName)){var newTarget=document.createElement("div");newTarget.id=divName;document.body.appendChild(newTarget);}var target=document.getElementById(divName);target.innerHTML=ft.toString();};FlashProxy.callJS=function(command,args){var argsArray=eval(args);var fp=FlashProxy.fpmap[argsArray.shift()];var scope=null;if(fp){scope=fp.callbackScope;}if(scope&&(command.indexOf(".")<0)){var functionToCall=scope[command];functionToCall.apply(scope,argsArray);}else{var functionToCall=eval(command);functionToCall.apply(functionToCall,argsArray);}};FlashProxy.callComplete=function(uid){var fp=FlashProxy.fpmap[uid];if(fp){fp.q.shift();if(fp.q.length>0){fp._execute(fp.q[0]);}}};FlashProxy.fpmap={};WIDGETBOX.flash.Utils.GetSwfVer=GetSwfVer;WIDGETBOX.flash.Utils.DetectFlashVer=DetectFlashVer;WIDGETBOX.flash.Utils.GetFlashVersionArray=GetFlashVersionArray;WIDGETBOX.flash.Utils.FlashTag=FlashTag;WIDGETBOX.flash.Utils.FlashSerializer=FlashSerializer;WIDGETBOX.flash.Utils.FlashProxy=FlashProxy;window.FlashProxy=FlashProxy;WIDGETBOX.setReady("flash.Utils");})();}WIDGETBOX.namespace("flash");if(!WIDGETBOX.flash.Helper){(function(){var F=false;var D=false;var C=false;var E={};var H=null;var G=[];var B=false;WIDGETBOX.flash.Helper={init:function(){if(!F){F=true;B=WIDGETBOX.flash.Utils.DetectFlashVer(8,0,0);}},addStartListener:function(I){if(I){if(!C){G[G.length]=I;}else{try{I();}catch(J){WIDGETBOX.logMessage(J);}}}},startHelper:function(K,N,I,J){if(D&&C){try{I();}catch(Q){WIDGETBOX.logMessage(Q);}return ;}A.addStartListener(I);if(!D){D=true;H="widgetbox_jsproxy_"+N;var L=WIDGETBOX.urls.cdnRuntimeBaseUrl+"/flash/v6/Helper.swf?cb="+WIDGETBOX.version;var R="6,0,65,0";if(B){L=WIDGETBOX.urls.cdnRuntimeBaseUrl+"/flash/v8/Helper.swf?cb="+WIDGETBOX.version;R="8,0,0,0";}var M=new WIDGETBOX.flash.Utils.FlashTag(L,1,1,R);M.addFlashVar("token",K);M.addFlashVar("widgetId",N);M.setId(H);M.setAllowScriptAccess("always");M.setAllowNetworking("all");M.setWmode("transparent");if(!B){M.setEnableFSCommand(true);}var O="widgetbox_helper_div_"+K;if(document.body){var P=document.getElementById(O);if(!P){P=document.createElement("div");P.id=O;P.style.position="absolute";P.style.left="0";P.style.top="0";if(WIDGETBOX.globals.firstParentNode){WIDGETBOX.globals.firstParentNode.parentNode.appendChild(P);}else{document.body.appendChild(P);}}P.innerHTML=M.toString();}else{document.write('<div id="'+O+'">'+M.toString()+"</div>");}}},setHelperStarted:function(){if(!C){C=true;for(var I=0;I<G.length;I++){var J=G[I];try{J();}catch(K){WIDGETBOX.logMessage(K);}}}},isHelperStarted:function(){return C;},sendMessage:function(L,M,P,I){if(C){if(B){var J=document.getElementById(H);if(J){J.sendMessage(L,M,P,I);}}else{var O="jsproxy_"+L+"_"+M;var K="widgetbox_jsproxy_"+M;var N=new FlashProxy(O,K,WIDGETBOX.urls.cdnRuntimeBaseUrl+"/flash/v6/JavaScriptFlashGateway.swf",null);N.call("sendMessage",L,M,P,I);}}},setMessageHandler:function(J,I){E[J]=I;},messageListener:function(L,I){var J=E[L];if(J){try{J(I);}catch(K){WIDGETBOX.logMessage(K);}}else{}}};var A=WIDGETBOX.flash.Helper;A.init();WIDGETBOX.setReady("flash.Helper");})();}WIDGETBOX.namespace("message");if(!WIDGETBOX.message.Helper){(function(){var D=false;var H=false;var F=false;var A={};var B=null;var G=false;var C=false;var E;var I="wbx_jg986gikek";WIDGETBOX.message.Helper={supported:function(){var L=navigator.userAgent.toLowerCase();var K=(L.indexOf("opera")>-1),M=(!K&&L.indexOf("msie")>-1);return !M&&typeof window.postMessage!=="undefined"&&typeof JSON!=="undefined";},init:function(){if(J.supported()){if(typeof window.addEventListener!=="undefined"){window.addEventListener("message",J.handleMessage,false);D=true;}else{if(typeof window.attachEvent!=="undefined"){window.attachEvent("onmessage",J.handleMessage);D=true;}}}},startHelper:function(K,L,M){if(!E){E=window.parent;}try{M();}catch(N){WIDGETBOX.logMessage(N);}},handleMessage:function(M){var L=J.getWbxMessage(M);if(L){var K=A[L.msgName];if(K){try{K(L.msgPayload);}catch(N){WIDGETBOX.logMessage(N);}}}},getWbxMessage:function(L){var N=null;try{if(L.data[0]==="{"){var K=JSON.parse(L.data);if(K.wbx===I){N=K;}}}catch(M){}return N;},sendMessage:function(L,M,O,K){if(D){try{E.postMessage(JSON.stringify({wbx:I,token:L,widgetId:M,msgName:O,msgPayload:K}),"*");}catch(N){}}},setMessageHandler:function(L,K){A[L]=K;}};var J=WIDGETBOX.message.Helper;J.init();WIDGETBOX.setReady("message.Helper");})();}WIDGETBOX.namespace("net");if(!WIDGETBOX.net.Utils){(function(){var B=0;WIDGETBOX.net.Utils={newTimestamp:function(){var C=(new Date()).getTime();if(C==B){C++;}B=C;return C;},createXMLHttpRequest:function(){try{return new ActiveXObject("Msxml2.XMLHTTP");}catch(C){}try{return new ActiveXObject("Microsoft.XMLHTTP");}catch(C){}try{return new XMLHttpRequest();}catch(C){}alert("XMLHttpRequest not supported");return null;},urlEncode:function(C){if(!C){return C;}return encodeURIComponent(C).replace(/\~/g,"%7E").replace(/\!/g,"%21").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\'/g,"%27");},newURLWithParams:function(E,K,F,J,C){var I="";var O="";var P="";if(F){for(var N in F){var G=F[N];var D=C?[C,N].join("."):N;E+=[P,A.urlEncode(D),"==",A.urlEncode(G)].join("");P="&&";}}if(K){for(var M in K){var H=K[M];var L=J?[J,M].join("."):M;I+=[O,A.urlEncode(L),"=",A.urlEncode(H)].join("");O="&";}if(I.length>0){var Q=E.charAt(E.length-1);if(E.indexOf("?")<0){E+="?";}else{if((Q!="&")&&(Q!="?")){E+="&";}}E+=I;}}return E;},addParameter:function(C,F,E){var D=C?(C+(C.indexOf("?")>-1?"&":"?")):"";return D+F+"="+encodeURIComponent(E);},addParameters:function(E,D){for(var C in D){E=WIDGETBOX.net.Utils.addParameter(E,C,D[C]);}return E;},sendPost:function(C,G,E){var F="wbx-poster";var D=document.getElementById(F);if(D&&D.parentNode){D.parentNode.removeChild(D);}D=document.createElement("form");D.style.display="none";D.id=F;D.action=C;D.target=E||"_blank";D.method="POST";for(key in G){if(G.hasOwnProperty(key)){var H=document.createElement("input");H.setAttribute("name",key);H.setAttribute("value",G[key]);D.appendChild(H);}}document.body.appendChild(D);D=document.getElementById(F);D.submit();}};var A=WIDGETBOX.net.Utils;WIDGETBOX.setReady("net.Utils");})();}WIDGETBOX.namespace("net");if(!WIDGETBOX.net.Uri){(function(){function A(){var D=arguments[0];for(var F=1;F<arguments.length;F++){if(!arguments[F]){continue;}var G=new A(arguments[F].toString());var I=new A(D.toString());if(G.path==""&&G.scheme==null&&G.authority==null&&G.query==null){if(G.fragment!=null){I.fragment=G.fragment;}G=I;}else{if(G.scheme==null){G.scheme=I.scheme;if(G.authority==null){G.authority=I.authority;if(G.path.charAt(0)!="/"){var J=I.path.substring(0,I.path.lastIndexOf("/")+1)+G.path;var C=J.split("/");for(var E=0;E<C.length;E++){if(C[E]=="."){if(E==C.length-1){C[E]="";}else{C.splice(E,1);E--;}}else{if(E>0&&!(E==1&&C[0]=="")&&C[E]==".."&&C[E-1]!=".."){if(E==C.length-1){C.splice(E,1);C[E-1]="";}else{C.splice(E-1,2);E-=2;}}}}G.path=C.join("/");}}}}D="";if(G.scheme!=null){D+=G.scheme+":";}if(G.authority!=null){D+="//"+G.authority;}D+=G.path;if(G.query!=null){D+="?"+G.query;}if(G.fragment!=null){D+="#"+G.fragment;}}this.uri=D.toString();var H="^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$";var B=this.uri.match(new RegExp(H));this.scheme=B[2]||(B[1]?"":null);this.authority=B[4]||(B[3]?"":null);this.path=B[5];this.query=B[7]||(B[6]?"":null);this.fragment=B[9]||(B[8]?"":null);if(this.authority!=null){H="^((([^:]+:)?([^@]+))@)?([^:]*)(:([0-9]+))?$";B=this.authority.match(new RegExp(H));this.user=B[3]||null;this.password=B[4]||null;this.host=B[5];this.port=B[7]||null;}this.toString=function(){return this.uri;};}WIDGETBOX.net.Uri=A;WIDGETBOX.setReady("net.Uri");})();}WIDGETBOX.namespace("net");if(!WIDGETBOX.net.JSONRequest){(function(){var B=[];WIDGETBOX.net.JSONRequest={get:function(D,H,J,O,E){var M=document;var L=WIDGETBOX.net.Utils.newTimestamp();var P=B.length;if(!H){H={};}var F=(E!=null)?E:H;F.timestamp=L;F.callback="WIDGETBOX.net.JSONRequest.handleCallback("+P+")";F.output="json";var I={};I.readyState=0;I.url=D;I.send=H;I.pathParams=E;I.done=J;I.timestamp=L;I.number=P;I.timeout=O;var G=WIDGETBOX.net.Utils.newURLWithParams(D,H,E);var C="widgetbox_jsonrequest_"+P;var N=M.getElementsByTagName("head").item(0);var K=M.createElement("script");I.script=K;I.id=C;B[P]=I;K.setAttribute("src",G);K.setAttribute("id",C);N.appendChild(K);},handleCallback:function(E){var J=document;if(B[E]){try{var F=B[E];B[E]=null;F.readyState=4;var D=J.getElementsByTagName("head").item(0);if(F.script){try{D.removeChild(F.script);}catch(I){WIDGETBOX.logMessage(I);}}var H=F.done;if(H){var C=function(K){try{H(E,K,null);}catch(L){WIDGETBOX.logMessage(L);}};return C;}}catch(I){WIDGETBOX.logMessage(I);}}var G=function(K){};return G;}};var A=WIDGETBOX.net.JSONRequest;WIDGETBOX.setReady("net.JSONRequest");})();}WIDGETBOX.namespace("net");if(!WIDGETBOX.net.ProxiedHTTPRequest){(function(){function A(E){var G=null;try{if(typeof ActiveXObject!="undefined"){G=new ActiveXObject("Microsoft.XMLDOM");G.async=false;G.loadXML(E);}else{var H=new DOMParser();G=H.parseFromString(E,"text/xml");}}catch(F){WIDGETBOX.logMessage(F);}return G;}var D=[];var C=0;function B(){this.initialized=false;this.onreadystatechange=null;this.onload=null;this.onerror=null;this.onprogress=null;this.readyState=0;this.status=0;this.statusText=null;this.requestHeaders=null;this.responseHeaders=null;this.responseXML=null;this.responseText=null;this.responseObj=null;this.parseAtProxyServer=false;this.format="raw";}B.prototype={getResponseXML:function(){if(!this.responseXML&&this.responseText){this.responseXML=A(this.responseText);}return this.responseXML;},abort:function(){this.initialized=false;},getAllResponseHeaders:function(){var F="";if(this.initialized){for(var E in this.responseHeaders){var G=this.responseHeaders[E];F+=E+": "+G+"\n";}}return F;},getResponseHeader:function(E){if(this.initialized){return this.responseHeaders[E];}return null;},setFormat:function(E){this.format=E;},setParseAtProxyServer:function(F,E){this.parseAtProxyServer=F;if(E){this.format=E;}},open:function(I,G,H,E,F){this.url=G;this.method=I;this.initialized=true;this.readyState=0;this.status=0;this.statusText=null;this.requestHeaders={};this.responseHeaders=null;this.responseXML=null;this.responseText=null;this.responseObj=null;this.parseAtProxyServer=false;this.format="raw";},send:function(E){if(this.initialized){var F=this;var L=function(N,P,M){F.readyState=4;if(P&&(!P.error)){if(P.responseText){F.responseText=P.responseText;}if(P.responseObj){F.responseObj=P.responseObj;}if(P.headers){F.responseHeaders=P.headers;}F.status=P.status;F.statusText=P.statusText;var O=F.getResponseHeader("Content-Type");if(O&&(O.indexOf("xml")>=0)){F.getResponseXML();}if(F.onreadystatechange){F.onreadystatechange();}if(F.onload){F.onload();}}else{if(P&&P.status){if(P.headers){F.responseHeaders=P.headers;}F.status=P.status;F.statusText=P.statusText;}else{F.status=502;F.statusText="Bad Gateway (Irrecoverable Error at Widgetbox Proxy)";}if(F.onreadystatechange){F.onreadystatechange();}if(F.onerror){F.onerror();}}};var K={};var J={};J.target=this.url;J.method=this.method;if(E){J.body=E;}var H="";for(var G in this.requestHeaders){var I=this.requestHeaders[G];H+=G+":"+I+"\n";}if(H){J.headers=H;}J.parse=this.parseAtProxyServer;J.format=this.format;K.token=WIDGETBOX.globals.token;WIDGETBOX.net.JSONRequest.get(WIDGETBOX.urls.proxyBaseUrl+"/ws_p/",K,L,0,J);}},setRequestHeader:function(F,E){if(this.initialized){this.requestHeaders[F]=E;}}};WIDGETBOX.net.ProxiedHTTPRequest=B;WIDGETBOX.setReady("net.ProxiedHTTPRequest");})();}WIDGETBOX.namespace("dom");if(!WIDGETBOX.dom.Utils){(function(){var docWriteFunc=document.write;var docWritelnFunc=document.writeln;var outputBuf="";var docWritePatch=function(markup){outputBuf+=markup;};var docWritelnPatch=function(markup){outputBuf+=markup+"\n";};WIDGETBOX.dom.Utils={lTrim:function(value){var re=/\s*((\S+\s*)*)/;return value.replace(re,"$1");},rTrim:function(value){var re=/((\s*\S+)*)\s*/;return value.replace(re,"$1");},trim:function(value){return utils.lTrim(utils.rTrim(value));},startWriteCapture:function(){document.write=docWritePatch;document.writeln=docWritelnPatch;},stopWriteCapture:function(){document.write=docWriteFunc;document.writeln=docWritelnFunc;},removeAllChildren:function(parentNode,loop){if(!loop){loop=0;}if(loop<5){try{if(parentNode.childNodes){while(parentNode.childNodes.length>0){var toRemove=parentNode.childNodes[parentNode.childNodes.length-1];WIDGETBOX.dom.Utils.removeAllChildren(toRemove);parentNode.removeChild(toRemove,loop++);}}}catch(e){WIDGETBOX.logMessage(e);}}},insertHtmlText:function(elem,htmlStr){var headNodes=[];try{var re=new RegExp("<\s*?script[\s\S]*?<\/script\s*?>","gi");var filteredHtml=htmlStr.replace(re,"");elem.innerHTML=filteredHtml;var head=document.getElementsByTagName("head").item(0);re=new RegExp("<\s*?script([^>]*?)>([\s\S]*?)<\/script","gi");var match=re.exec(htmlStr);while(match!=null){var scriptContent=RegExp.$2;if(scriptContent){scriptContent=WIDGETBOX.dom.Utils.trim(scriptContent);}if(scriptContent&&scriptContent.length>0){eval(scriptContent);}else{var scriptNode=document.createElement("script");scriptNode.setAttribute("type","text/javascript");scriptNode.setAttribute("defer",true);var reSrc=new RegExp('src="([\s\S]*?)"',"gi");var strSrc=reSrc.exec(match[1]);if(strSrc){scriptNode.setAttribute("src",strSrc[1]);}else{scriptNode.text=match[2];}headNodes.push(scriptNode);head.appendChild(scriptNode);}match=re.exec(htmlStr);}}catch(e){WIDGETBOX.logMessage(e);}return headNodes;},insertCssFile:function(URI,doc,checkDuplicates){if(!URI){return ;}var doc=document;var req=new WIDGETBOX.net.ProxiedHTTPRequest();req.onload=function(){var cssStr=req.responseText;cssStr=utils.fixPathsInCssText(cssStr,URI);if(checkDuplicates){var styles=doc.getElementsByTagName("style");var cssText="";for(var i=0;i<styles.length;i++){cssText=(styles[i].styleSheet&&styles[i].styleSheet.cssText)?styles[i].styleSheet.cssText:styles[i].innerHTML;if(cssStr==cssText){return ;}}}var style=utils.insertCssText(cssStr);};req.open("get",URI);req.send();},insertCssText:function(cssStr,doc,URI,id){if(!cssStr){return ;}var doc=document;if(URI){cssStr=utils.fixPathsInCssText(cssStr,URI);}var style;if(id){style=doc.getElementById(id);}if(!style){style=doc.createElement("style");style.setAttribute("type","text/css");if(id){style.setAttribute("id",id);}var head=doc.getElementsByTagName("head")[0];if(!head){return ;}else{head.appendChild(style);}}else{WIDGETBOX.dom.Utils.removeAllChildren(style);}if(style.styleSheet){style.styleSheet.cssText=cssStr;}else{var cssText=doc.createTextNode(cssStr);style.appendChild(cssText);}return style;},fixPathsInCssText:function(cssStr,URI){if(!cssStr||!URI){return ;}var pos=0;var str="";var url="";while(pos!=-1){pos=0;url="";pos=cssStr.indexOf("url(",pos);if(pos<0){break;}str+=cssStr.slice(0,pos+4);cssStr=cssStr.substring(pos+4,cssStr.length);url+=cssStr.match(/^[\t\s\w()\/.\\'"-:#=&?]*\)/)[0];cssStr=cssStr.substring(url.length-1,cssStr.length);url=url.replace(/^[\s\t]*(['"]?)([\w()\/.\\'"-:#=&?]*)\1[\s\t]*?\)/,"$2");if(url.search(/(file|https?|ftps?):\/\//)==-1){url=(new WIDGETBOX.net.Uri(URI,url).toString());}str+=url;}return str+cssStr;},getComputedStyle:function(el,prop){if(window.getComputedStyle){return el.ownerDocument.defaultView.getComputedStyle(el,null).getPropertyValue(prop);}if(!el){return"";}var re=/(\-([a-z]){1})/g;if(prop=="float"){prop="styleFloat";}if(re.test(prop)){prop=prop.replace(re,function(){return arguments[2].toUpperCase();});}return(el.currentStyle&&el.currentStyle[prop])?el.currentStyle[prop]:null;},getX:function(node){return utils.getXY(node)[0];},getY:function(node){return utils.getXY(node)[1];},getXY:function(node){var ua=navigator.userAgent.toLowerCase();var isIE=(ua.indexOf("msie")>-1);var isIE8=(isIE&&(ua.indexOf("msie 8")>-1));var isIE9=(isIE&&(ua.indexOf("msie 9")>-1));var isGecko=(ua.indexOf("gecko")>-1);var isSafari=(ua.indexOf("safari")>-1);var isOpera=(ua.indexOf("opera")>-1);var xy=false;if(node!=null&&node.style.display!=null){var doc=node.ownerDocument;var docEl=document.documentElement;var docScrollLeft=utils.getDocumentScrollLeft(doc);var docScrollTop=utils.getDocumentScrollTop(doc);if(docEl.getBoundingClientRect){var box={top:0,left:0};try{box=node.getBoundingClientRect();}catch(e){}xy=[box.left,box.top];var docMode=doc.documentMode;try{if(self.top&&self.top.document&&self.top.document.documentMode){docMode=self.top.document.documentMode;}}catch(ignore){}var isIE8or9=isIE8||isIE9;if((isIE&&!isIE8or9)||(isIE8or9&&(docMode&&!isNaN(docMode)&&Number(docMode)<8))){var off1=2;var off2=2;var mode=doc.compatMode;if((mode==="BackCompat")){var bLeft=utils.getComputedStyle(docEl,"border-left-width");var bTop=utils.getComputedStyle(docEl,"border-top-width");if(bLeft!=="medium"){off1=parseInt(bLeft,10);}if(bTop!=="medium"){off2=parseInt(bTop,10);}}xy[0]-=off1;xy[1]-=off2;}if((docScrollTop||docScrollLeft)){xy[0]+=docScrollLeft;xy[1]+=docScrollTop;}}else{xy=[node.offsetLeft,node.offsetTop];var parentNode=node;var borders;while((parentNode=parentNode.offsetParent)){xy[0]+=parentNode.offsetLeft;xy[1]+=parentNode.offsetTop;if(isGecko){borders=utils.calcBorders(parentNode);xy[0]+=borders[0];xy[1]+=borders[1];}}if(utils.getComputedStyle(node,"position")!=="fixed"){parentNode=node;var scrollTop,scrollLeft;while((parentNode=parentNode.parentNode)&&parentNode.tagName){scrollTop=parentNode.scrollTop;scrollLeft=parentNode.scrollLeft;if(isGecko&&(utils.getComputedStyle(parentNode,"overflow")!=="visible")){borders=utils.calcBorders(parentNode);xy[0]+=borders[0];xy[1]+=borders[1];}if(scrollTop||scrollLeft){xy[0]-=scrollLeft;xy[1]-=scrollTop;}}xy[0]+=docScrollLeft;xy[1]+=docScrollTop;}else{if(isOpera){xy[0]-=docScrollLeft;xy[1]-=docScrollTop;}else{if(isSafari||isGecko){xy[0]+=docScrollLeft;xy[1]+=docScrollTop;}}}}}return xy;},setXY:function(node,xy){var pos=utils.getComputedStyle(node,"position");var left=parseFloat(utils.getComputedStyle(node,"left"));var top=parseFloat(utils.getComputedStyle(node,"top"));if(pos=="static"){pos="relative";node.style.position=pos;}if(isNaN(left)){left=(pos=="relative")?0:node.offsetLeft;}if(isNaN(top)){top=(pos=="relative")?0:node.offsetTop;}var currentXY=utils.getXY(node);if(xy[0]!==null){node.style.left=(xy[0]-currentXY[0]+left)+"px";}if(xy[1]!==null){node.style.top=(xy[1]-currentXY[1]+top)+"px";}},getDocumentScrollTop:function(doc){doc=doc||document;return Math.max(doc.documentElement.scrollTop,doc.body.scrollTop);},getDocumentScrollLeft:function(doc){doc=doc||document;return Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft);},getDocumentHeight:function(doc){doc=doc||document;return Math.max(Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight),Math.max(doc.body.offsetHeight,doc.documentElement.offsetHeight),Math.max(doc.body.clientHeight,doc.documentElement.clientHeight));},getDocumentWidth:function(doc){doc=doc||document;return Math.max(Math.max(doc.body.scrollWidth,doc.documentElement.scrollWidth),Math.max(doc.body.offsetWidth,doc.documentElement.offsetWidth),Math.max(doc.body.clientWidth,doc.documentElement.clientWidth));},calcBorders:function(node){var l=parseInt(utils.getComputedStyle(node,"border-left-width"),10)||0;var t=parseInt(utils.getComputedStyle(node,"border-top-width"),10)||0;var ua=navigator.userAgent.toLowerCase();if((ua.indexOf("gecko")>-1)){var RE_TABLE=new RegExp("^t(?:able|d|h)$","i");if(RE_TABLE.test(node.tagName)){l=0;t=0;}}return[l,t];},openPopupWindow:function(url,name,width,height,config){if(url){if(!name){name="wbxpopupwindow";}if(!width){width=500;}if(!height){height=500;}if(!config){var centerWidth=(window.screen.width-width)/2;var centerHeight=(window.screen.height-height)/2;config="width="+width+",height="+height+",toolbar=0,locationbar=1,directories=0,status=0,menubar=0,scrollbars=1,resizable=0,copyhistory=0,left="+centerWidth+",top="+centerHeight;}window.open(url,name,config);}},hideElementsOnPage:function(doc,nodeName,overlapNode,array){if(!doc){doc=document;}if(!array){array=[];}var nodes=WIDGETBOX.dom.Utils.getElementsByTagName(nodeName,doc);for(var i=0;i<nodes.length;i++){var n=nodes[i];if(n.style&&n.style.visibility!="hidden"&&(!overlapNode||WIDGETBOX.dom.Utils.doNodesOverlap(overlapNode,n))){n.setAttribute("data-visibility",n.style.visibility);n.style.visibility="hidden";array[array.length]=n;}}return array;},showHiddenElementsOnPage:function(array){if(array){for(var i=0;i<array.length;i++){var previousVisibility=array[i].getAttribute("data-visibility");array[i].style.visibility=previousVisibility||"";}array=[];}return array;},doNodesOverlap:function(node1,node2){var top1=WIDGETBOX.dom.Utils.getY(node1);var left1=WIDGETBOX.dom.Utils.getX(node1);var right1=left1+node1.offsetWidth;var bottom1=top1+node1.offsetHeight;var left2=WIDGETBOX.dom.Utils.getX(node2);var top2=WIDGETBOX.dom.Utils.getY(node2);var right2=left2+node2.offsetWidth;var bottom2=top2+node2.offsetHeight;var v=false;var h=false;if(top1<=top2&&bottom1>=top2){v=true;}if(top1>=top2&&top1<=bottom2){v=true;}if(left1<=left2&&right1>=left2){h=true;}if(left1>=left2&&left1<=right2){h=true;}return v&&h;},getElementsByTagName:function(nodeName,rootNode,array){if(!rootNode){rootNode=document;}if(!array){array=[];}for(var i=0;i<rootNode.childNodes.length;i++){var node=rootNode.childNodes[i];if(node.nodeName.toLowerCase()==nodeName){array.push(node);}else{array=WIDGETBOX.dom.Utils.getElementsByTagName(nodeName,node,array);}}return array;}};var utils=WIDGETBOX.dom.Utils;WIDGETBOX.setReady("dom.Utils");})();}WIDGETBOX.namespace("track");if(!WIDGETBOX.track.tracker){(function(){WIDGETBOX.track.tracker={Tracker:function(F,B,E,A,C,D){this.firstImpressionLogged=false;this.affiliateImpressionsLogged=false;this.timesLogged=0;this.targetUrl=null;this.sessionId=B;this.impressionDuration="5";this.adTreatmentId=null;this.adPartnerId=null;this.affiliateId=null;this.channelId=null;this.isInEditor=false;this.syndication_sid="";this.hover_locked=false;this.hover_lock_int=null;this.isAdServerDetailsDoneLoading=false;this.isInitialized=false;this.clickTrackingParams=null;this.locationUrl=A;this.affiliateTrackers=null;this.sik=null;this.token=C;this.widgetPrototype=(F&&F.widgetPrototype)||"NONE";this.widgetPrototypeOrdinal=(F&&F.widgetPrototypeOrdinal)||"";this.systemData=null;this.userData=null;this.testVariants=D;this.seq=0;this.hasEngaged=false;this.controllerRegPk=null;this.controllerAppPk=null;this.wrapperType=E?E:"1";this.baseData=null;this.initialize=function(L,H){this.sessionId=H||this.sessionId||WIDGETBOX.generateGUID();this.baseData={};this.baseData.sid=this.sessionId;this.baseData.vid=WIDGETBOX.globals.vid||this.sessionId;this.baseData.sik="";if(this.systemData){for(var J in this.systemData){if(this.systemData.hasOwnProperty(J)){this.baseData["sd."+J]=this.systemData[J];}}}if(this.userData){for(var G in this.userData){if(this.userData.hasOwnProperty(G)){this.baseData["ud."+G]=this.userData[G];}}}if(this.testVariants){for(var M in this.testVariants){if(this.testVariants.hasOwnProperty(M)){this.baseData["v."+M]=this.testVariants[M];}}}this.baseData.t=(this.token)?this.token:WIDGETBOX.globals.token;this.baseData.w=this.wrapperType;for(var I in WIDGETBOX.globals.trackingKeys){this.baseData[I]=L[WIDGETBOX.globals.trackingKeys[I]];}try{this.locationUrl=(this.locationUrl)?this.locationUrl:window.location.href;}catch(K){}this.updateBaseTrackingRequestUrl();this.instId=L.appId;this.controllerRegPk=L.controllerRegPk;this.controllerAppPk=L.controllerAppPk;this.userPk=L.userPK;this.isInitialized=true;};this.updateBaseTrackingRequestUrl=function(){this.baseMetricsTrackingRequestUrl=WIDGETBOX.net.Utils.newURLWithParams(WIDGETBOX.urls.metricsBaseUrl+"/image.gif",this.baseData);};this.setSubInstanceKey=function(G){if(G){this.sik=G;this.baseData.sik=this.sik;this.updateBaseTrackingRequestUrl();}};this.logWidgetImpression=function(){if(!this.firstImpressionLogged&&!this.isInEditor&&!WIDGETBOX.globals.disableHitTracking&&this.isInitialized){this.firstImpressionLogged=true;var G={};G.it="0";G.sq=this.getNextSequence();G.ts=new Date().getTime();G.CXNID="2000003.0000000001NXC";if(this.controllerRegPk){G["sd.crk"]=this.controllerRegPk;}if(this.controllerAppPk){G["sd.cik"]=this.controllerAppPk;}G["sd.startTime"]=WIDGETBOX.globals.startTime;G.l=this.locationUrl;try{if(WIDGETBOX.random.Utils.seedData){G.cs=WIDGETBOX.random.Utils.seedData;}}catch(H){WIDGETBOX.logMessage(H);}this.loadMetricsTrackerImage(WIDGETBOX.net.Utils.addParameters(this.baseMetricsTrackingRequestUrl,G));}};this.logAffiliateImpressions=function(){if(this.affiliateTrackers&&!this.affiliateImpressionsLogged&&!this.isInEditor&&!WIDGETBOX.globals.disableHitTracking&&this.isInitialized){this.affiliateImpressionsLogged=true;for(var G=0;G<this.affiliateTrackers.length;G++){this.loadMetricsTrackerImage(this.affiliateTrackers[G],true);}}};this.getActionRequestData=function(L,M,H,G,I,O){var K={};if(O){for(var N in this.baseData){K[N]=this.baseData[N];}}K.it="8";K.lbl=L;K.pl=M;if(H!==undefined&&H!==null){if(!this.getHasEngaged()&&this.isAnEngagement(L,M,H,G)){this.setHasEngaged();}K.c=H;}if(!this.getHasEngaged()&&H!=WIDGETBOX.track.tracker.ActionCause.SYSTEM&&H!="6"){K["sd.deprecated"]="1";}if(G!==undefined&&G!==null){K.cs=G;}if(I!==undefined&&I!==null){for(var J in I){if(I.hasOwnProperty(J)){K["ud."+J]=I[J];}}}K.sq=this.getNextSequence();K.ts=new Date().getTime();K.l=this.locationUrl;return K;};this.logWidgetAction=function(H,K,J,I,G){if(!this.isInEditor&&this.isInitialized){this.loadMetricsTrackerImage(WIDGETBOX.net.Utils.addParameters(this.baseMetricsTrackingRequestUrl,this.getActionRequestData(H,K,J,I,G,false)));}};this.isAnEngagement=function(G,J,I,H){return(I==WIDGETBOX.track.tracker.ActionCause.USER||I=="1")&&!(G=="hover"&&J=="initial");};this.setHasEngaged=function(){this.hasEngaged=true;};this.getHasEngaged=function(){return this.hasEngaged;};this.getMetricsRedirectUrl=function(L,H){if(this.isInitialized){var G={};G.it="5";G.ts=new Date().getTime();if(L){if(this.clickTrackingParams&&this.clickTrackingParams.wbx_ls){L+=this.clickTrackingParams.wbx_ls;}G.u=L;}if(this.clickTrackingParams){var I=0;var K=this.clickTrackingParams.wbx_lp;if(!K){K=this.clickTrackingParams["wbx_lp_"+I];}while(K){if(I==0){G.up=K;}else{G["up"+I]=K;}I++;K=this.clickTrackingParams["wbx_lp_"+I];}var J=this.clickTrackingParams.wbx_ct;if(J){G["up"+I]=J;}}if(H){G.r=H;G.p="1";}else{G.p="0";}G.sq=this.getNextSequence();G.l=this.locationUrl;return WIDGETBOX.net.Utils.addParameters(this.baseMetricsTrackingRequestUrl,G);}return null;};this.loadMetricsTrackerImage=function(H,G){try{var J=new Date().getTime();H=H.replace("__WBX_TIMESTAMP__",J).replace("[timestamp]",J);if(!G){H=WIDGETBOX.net.Utils.addParameter(H,"et","G");}if(!this.isInEditor){var I=new Image(1,1);I.alt="";I.onload=function(){};I.src=H;}}catch(K){}};this.getTrackingParams=function(){return this.baseData;};this.setClickTrackingParams=function(G){this.clickTrackingParams=G;};this.getOOBLinkTracker=function(){if(this.clickTrackingParams&&this.clickTrackingParams.wbx_lt){return this.clickTrackingParams.wbx_lt;}else{return null;}};this.getNextSequence=function(){return this.seq++;};this.getShareUrl=function(U,P,K,I,L,G,T,O,Q,J,H){if(!G){G="json";}var N=WIDGETBOX.urls.shareBaseUrl+"/share/get/";N+=U||this.instId;if(P.toUpperCase()==WIDGETBOX.track.tracker.ShareType.FACEBOOK_WIDGET){P=WIDGETBOX.track.tracker.ShareType.FACEBOOK;}N+="/"+P.toUpperCase()+"."+G;var S={};S.token=this.token||WIDGETBOX.globals.token;S[WIDGETBOX.track.tracker.ShareConstants.LABEL]=K?K.toLowerCase():P.toLowerCase();if(I){S[WIDGETBOX.track.tracker.ShareConstants.URL]=I;}if(T){S.wbx_callback=T;}if(J!==undefined){S.c=J;}if(H!==undefined){S.cs=H;}var M=new RegExp(WIDGETBOX.globals.shareTrackingKeyRegex);for(var R in this.baseData){if(this.baseData.hasOwnProperty(R)){if(M.test(R)){S[R]=this.baseData[R];}}}if(Q){S.sid=Q;}if(O){S.sik=O;}S.ts=new Date().getTime();if(L){N=WIDGETBOX.net.Utils.newURLWithParams(N,L);}return WIDGETBOX.net.Utils.newURLWithParams(N,S);};this.clone=function(){var I=this;var G=new WIDGETBOX.track.tracker.Tracker();for(var J in I){if(I.hasOwnProperty(J)&&!WIDGETBOX.isType("Function",I[J])){if(J=="baseData"||J=="systemData"||J=="userData"){G[J]={};for(var H in I[J]){if(I[J].hasOwnProperty(H)){G[J][H]=I[J][H];}}}else{G[J]=I[J];}}}G.getNextSequence=function(){return I.getNextSequence();};G.getHasEngaged=function(){return I.getHasEngaged();};G.setHasEngaged=function(){I.setHasEngaged();};return G;};if(F){this.initialize(F,B);}},ShareType:{DEFAULT:"DEFAULT",URL:"URL",OWN_SITE:"OWN_SITE",QR_CODE:"QR_CODE",SMS:"SMS",EMAIL:"EMAIL",TWITTER:"TWITTER",FACEBOOK:"FACEBOOK",FACEBOOK_WIDGET:"FACEBOOK_WIDGET",LINKED_IN:"LINKED_IN",DIGG:"DIGG",DELICIOUS:"DELICIOUS",STUMBLE_UPON:"STUMBLE_UPON",REDDIT:"REDDIT",YAHOO:"YAHOO",MENU_SHOW:"MENU_SHOW"},ShareConstants:{URL:"url",ACTION:"action",LABEL:"label",TO:"to",FROM:"from",FROM_NAME:"fname",IP:"ip",USER_AGENT:"ua",LANG:"lang",REFERRER:"rf",SMS_CARRIER:"carrier",MESSAGE_CUSTOM_BODY:"body",MESSAGE_CUSTOM_SUBJECT:"subject",IMAGE_WIDTH:"w",IMAGE_HEIGHT:"h",TITLE:"title",SUBSERVICE:"subservice"},SendShareAction:{MOBILE_DEFAULT_SMS:0,MOBILE_DEFAULT_EMAIL:1,MOBILE_CUSTOM:2,SOCIAL_SHARE_EMAIL:3,WIDGET_SHARE_EMAIL:4,SOCIAL_SHARE_SMS:5,CUSTOM_TEMPLATE:6},SMSCarrier:{ATT:0,TMOBILE:1,SPRINT:2,VERIZON:3},ActionLabel:{HOVER:"hover",TAB_CLICK:"tab click",BODY_CLICK:"body click",SCROLL:"scroll",PLAY:"play",PLAY_AUTO:"play auto",PLAYBACK_QUARTER:"play 1/4",PLAYBACK_HALF:"play half",PLAYBACK_THREE_QUARTER:"play 3/4",PLAYBACK_FULL:"play full",PLAYBACK_REPLAY_WITH_SOUND:"play sound",FOLLOW:"follow",CONNECT:"connect",TWEET:"tweet",SUBMIT:"submit",RESULT:"result",READ_MORE:"read more",SHARE:"share",CUSTOM:"custom",OPEN:"open",CLOSE:"close",EXPAND:"expand",COLLAPSE:"collapse",INSTALL:"install",PAGE_VIEW:"page view",HOMESCREEN:"homescreen",TEL:"tel:",MAILTO:"mailto:",MAP:"map:",WEBCAL:"webcal:"},ActionCause:{AUTO:0,USER:1,CLICK:2,HOVER:3,TOUCH:4,KEYBOARD:5,SYSTEM:6}};}());}WIDGETBOX.namespace("publisher");if(!WIDGETBOX.publisher.Main){(function(){var F=WIDGETBOX.globals;var I=false;var g=false;var K=WIDGETBOX.net.JSONRequest;var c=WIDGETBOX.message.Helper.supported()?WIDGETBOX.message.Helper:WIDGETBOX.flash.Helper;function d(o){var n="";var l=window.location.search;var p=l.indexOf(o+"=");if(p!=-1){p+=o.length+1;var m=l.indexOf("&",p);if(m==-1){m=l.length;}n=decodeURIComponent(l.substring(p,m));}return n;}function U(r){var q={};var m=window.location.search;var l=m.indexOf(r+".");while(l!=-1){var o=m.indexOf("=",l);if(o==-1){o=m.indexOf("&",l);if(o==-1){o=m.length;}}var n=m.indexOf("&",l);if(n==-1){n=m.length;}var p=decodeURIComponent(m.substring(l+r.length+1,o));q[p]=d(r+"."+p);l=m.indexOf(r+".",n);}return q;}var Z=d("widget.appId");var X=d("widget.appPK");var S=d("widget.regPK");var A=d("widget.providerPK");var T=d("widget.partnerNetworkPK");var D=d("widget.fromGalleryPK");var J=d("widget.userPK");var N=d("widget.location");N=(N)?N:window.location.href;var V=d("widget.sourceId");var E=d("widget.id");var L=d("widget.token");var W=d("widget.hasDynamicSize")=="true";var Q=d("widget.hasDynamicStyle")=="true";var b=W||Q||d("widget.sendsMessages")=="true";var j=d("widget.prototype");var f=d("widget.prototypeOrdinal");var k=U("widget.variant");var R=d("widget.version");var Y=d("widget.regVersion");var H=d("widget.regPubVersion");WIDGETBOX.globals.token=L;if(!WIDGETBOX.globals.widgets){WIDGETBOX.globals.widgets=[];}var a=WIDGETBOX.globals.widgets[E];if(!a){a={info:{configParams:{}}};WIDGETBOX.globals.widgets[E]=a;}if(window.WIDGETSERVER&&window.WIDGETSERVER.configParams){a.info.configParams=window.WIDGETSERVER.configParams;}var h=a.info;var C=h.configParams;a.appId=Z;a.id=E;h.appWidth=parseInt(d("widget.width"));h.appHeight=parseInt(d("widget.height"));h.token=L;h.hasDynamicSize=W;h.hasDynamicStyle=Q;h.sendsMessages=b;var O={};if(V){for(var P in WIDGETBOX.globals.trackingKeys){O[WIDGETBOX.globals.trackingKeys[P]]=d("widget.s"+P.charAt(0).toUpperCase()+P.slice(1));}var B=d("widget.sTsq");var e=d("widget.sThe");k=U("widget.sVariant");O.appPK=sAppPK;O.appId=sAppId;O.regPK=sRegPK;O.providerPK=sProviderPK;O.installPartnerNetworkPK=sPartnerNetworkPK;O.fromGalleryPK=sFromGalleryPK;O.userPK=sUserPK;O.isUseDefaultDomain=false;O.widgetPrototype=sWidgetPrototype;O.widgetPrototypeOrdinal=sWidgetPrototypeOrdinal;O.version=sAppVersion;O.regVersion=sRegVersion;O.regPubVersion=sRegPubVersion;}else{O.appPK=X;O.appId=Z;O.regPK=S;O.providerPK=A;O.installPartnerNetworkPK=T;O.fromGalleryPK=D;O.userPK=J;O.isUseDefaultDomain=false;O.widgetPrototype=j;O.widgetPrototypeOrdinal=f;O.version=R;O.regVersion=Y;O.regPubVersion=H;}a.tracker=new WIDGETBOX.track.tracker.Tracker(O,WIDGETBOX.generateGUID(WIDGETBOX.random.Utils.random),null,N,WIDGETBOX.globals.token,k);if(V){a.tracker.setSubInstanceKey(X);a.tracker.seq=B||0;a.tracker.hasEngaged=e=="true";}function M(){var l=window.location.search.substring(1);var s=l.split("&");for(var n=0;n<s.length;n++){var r=s[n].split("=");var p=r[0];var q=decodeURIComponent(r[1]);if(p.indexOf("widget.")!=0){var o=p.substring(7);var m={};m.name=o;m.value=q;C[o]=m;}}}M();WIDGETBOX.publisher.Main={init:function(){if(!I){I=true;WIDGETBOX.addPageLoadListener(function(){G.setWidgetLoaded();});}},setWidgetLoaded:function(){if(!g){g=true;if(b){c.startHelper(L,-1,function(){G.doPostLoadInit();});}}},doPostLoadInit:function(){if(Q){var l=function(m){if(W){G.updateWidgetSize();}};c.setMessageHandler("sendStyle",l);if(h.sendsMessages){c.sendMessage(L,1001,"requestStyle",{widgetId:E});}}else{if(W){G.sizeWidgetToContents();}}},setSendsMessages:function(l){b=l;},setUpdateSizeOnLoad:function(l){W=l;},setUpdateStyleOnLoad:function(l){Q=l;},sizeWidgetToContents:function(){var l=WIDGETBOX.dom.Utils.getDocumentWidth();var m=WIDGETBOX.dom.Utils.getDocumentHeight();G.setWidgetSize(l,m);},setWidgetSize:function(m,l){if(h.sendsMessages){c.startHelper(L,E,function(){c.sendMessage(L,1001,"resizeWidget",{widgetId:E,width:m,height:l});});}},gotoAndTrackUrl:function(l,m){if(h.sendsMessages){c.startHelper(L,E,function(){c.sendMessage(L,1001,"gotoAndTrackUrl",{widgetId:E,href:l,target:m});});}},openMenu:function(){if(h.sendsMessages){c.startHelper(L,E,function(){c.sendMessage(L,1001,"openGetWidgetDiv",{widgetId:E});});}},resizeWidgetDiv:function(m,l){if(h.sendsMessages){c.startHelper(L,E,function(){c.sendMessage(L,1001,"resizeWidgetDiv",{widgetId:E,width:m,height:l});});}},renderWidget:function(q,m,s,r,p,l,o,n){if(h.sendsMessages){c.startHelper(L,E,function(){c.sendMessage(L,1001,"renderWidget",{widgetId:E,appId:q,cfgString:m,mode:r,width:p,height:l,isChild:o,closeOnMouseOut:n});});}},unloadWidget:function(){if(h.sendsMessages){c.startHelper(L,E,function(){c.sendMessage(L,1001,"unloadWidget",{widgetId:E});});}},closeLightbox:function(){if(h.sendsMessages){c.startHelper(L,E,function(){c.sendMessage(L,1001,"unloadWidget",{widgetId:E});});}},logWidgetAction:function(l,o,n,m){a.tracker.logWidgetAction(l,o,n,m);},getTracker:function(){return a.tracker;},openPage:function(l,n){var o=a.tracker.getMetricsRedirectUrl(l);var m=this.tracker.getOOBLinkTracker();if(m){this.tracker.loadMetricsTrackerImage(m);}if(n&&n.toLowerCase()=="_blank"){window.open(o);}else{window.location.href=o;}}};var G=WIDGETBOX.publisher.Main;G.init();WIDGETBOX.setReady("publisher.Main");})();}